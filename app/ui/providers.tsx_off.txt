// app/ui/providers.tsx
"use client";

import type { ReactNode, ComponentProps } from "react";

import GTMProvider from "@/app/providers/GTMProvider";
import { ContextProvider } from "@/context/AppContext";
import ThemeProviders from "@/app/providers/ThemeProviders";
import { AuthProvider } from "@/complements/components/AuthenticationComp/AuthContext";
import { NotificationsProvider } from "@/app/lib/notifications/provider";
import FdvProvider from "@/app/providers/FdvProvider";
import NotificationPopupHost from "@/complements/components/Notifications/NotificationPopupHost";

type ContextProps = ComponentProps<typeof ContextProvider>;

export type ProvidersProps = {
  children: ReactNode;
} & Pick<ContextProps, "initialLocale" | "initialBranding" | "initialSettings">;

export default function Providers({
  children,
  initialLocale,
  initialBranding,
  initialSettings,
}: ProvidersProps) {
  return (
    <GTMProvider>
      <ContextProvider
        initialLocale={initialLocale}
        initialBranding={initialBranding}
        initialSettings={initialSettings}
      >
        <ThemeProviders>
          <FdvProvider>
            <AuthProvider>
              <NotificationsProvider>
                {children}
                <NotificationPopupHost />
              </NotificationsProvider>
            </AuthProvider>
          </FdvProvider>
        </ThemeProviders>
      </ContextProvider>
    </GTMProvider>
  );
}
